webpackJsonp([1],{"+G+1":function(e,t){},"3q37":function(e,t){e.exports="data:image/png;base64,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"},"4tNt":function(e,t){},"69E3":function(e,t){},"6Is8":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAxQTFRF/xcX/9HR3d3d////xEaMXQAAAHpJREFUeNqMyscBwCAMBDAD+++c0N0PvUX1AdUGFMKpUIHpPw2lflAaB6R58rROmvbJ0jlJuidO7ISJnyiJEyR5/KSOm/TxkjlOsscm55jkHZ3co5J/ZAqOSNHhKTwsxeem5JyUnZ3Ss1J+ZgJnJHR6gqcneHp68AkwAL0lDbvWu4JdAAAAAElFTkSuQmCC"},"7zck":function(e,t){},"9rie":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAlQTFRF3d3d/////88zjKi6LQAAACZJREFUeNpiYCAKMBIEIEVMBMCoolFFo4pGFQ2UImIKMSIAQIABAC3mCIUCx3laAAAAAElFTkSuQmCC"},Efnd:function(e,t,n){e.exports=n.p+"static/img/background.3f48091.png"},JtUg:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF0AAAAuCAYAAABKxxWsAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADMUlEQVR4Xu2aSYsTURRGE2dFRBFREaeFuHLjwo2oC8WFIKgI/kNRUEHBAUTEnVsRXLpUwZXi0PYUv1PUF29XowS5SZGq98HhVtLd6X4nt1+9vKrhaDQalMw2G+paMsMU6S2kSG8hRXoLGQrEU5143JfE1YSP1zyXueBA8Na6Wn5fpcNqqD6ubGdaR/BOsVFE6X0TH0WvNKjEZ0vfLTYJi29ON12Ox+muRvKyWKor8NxqtvR9YrOI4vsinbGS2OmL4lddkQ9I52spQW7aO9iRfBBnxIKw/OVM6X6nS/6ERpzqf36fpxfGypiBMR8Uj8VHcU78EHQ7LKrTmdtTgty+nkgZ7xbhhjsknohPAuk/a6ppJlt6X5eMiEa6OSyeCaSfF7HTF7Kl9/XDEdK3CcaP9KPiuWB6QTqy3enp0pvTSV+kM60g3OKPi5fCc/q4yyFb+jh64fqo2xkqKu50g/RXYurS6fKSGadIbyFFegsp0ltIkd5CypKxpSUjS6covg/SPW4vF5F+TMzswxG/kGrxXZbu8QGdvl0wfj6RHhFPBdsAFwTbAFOTvqOuSG9ONV2Ix+OxUdlrQjpd7r0XNrweiaZ0KBteEyaOxQ3FOA2i6XLk8/iAeCAs/btAPBcy0qWXK0dr461dpHt6WcqWvkv43Y/dPo/x397sbE6arpFT4qq4KOh6won0rLD06lqppKdeI+3KRQz/zR5DU7phOr0srouTwvkmHorb4o1gakE4rGRL3yss3eLnVbppCqeeEDfEFYF45524LxD+VXipOL4oLcotGH9JFG7prE4uiZvitHCQypr8rngr3NFQnTgFt14wjwPOU6XvF5zJY7fPu3SWf7fENbFHOO8FXc0q5YvwDUXI9j0uPLZwppRqWsmW3vXVCwJfiDvitfBdWxYeQbAr2E2m805LZxWC6Hvis2iK9mNXi46ySXWcLb2L973YEAKRGonSIYr2z60znC29a/e9RHGWTo2i/RzfY4jrumRL79o2QBQZpbtG2cT1n8mW3qVdxigyyo3HQFwnSrb05nQyz9JJtBMlk/82lyo988VKJgtdXjLjFOktpEhvIUX6zDMY/Aah6nn8WG5N7wAAAABJRU5ErkJggg=="},M2yu:function(e,t){e.exports="data:image/png;base64,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"},"N8v+":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAlQTFRF3d3d////ZZtBHPAPSwAAACZJREFUeNpiYCAKMBIEIEVMBMCoolFFo4pGFQ2UImIKMSIAQIABAC3mCIUCx3laAAAAAElFTkSuQmCC"},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),i=n("3EgV"),r=n.n(i),s=n("zsG3"),a=n.n(s),c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("v-app",[t("v-content",["Room"!==this.$route.name?t("transition",{attrs:{name:"router-anim",mode:"out-in","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[t("router-view")],1):t("router-view")],1)],1)],1)},staticRenderFns:[]};var u=n("VU/8")({name:"App"},c,!1,function(e){n("fkQO")},null,null).exports,d=n("VTQS"),p=n("/ocq"),h=n("VTQS").default,l={name:"Home",data:function(){return{username:"",password:""}},created:function(){},mounted:function(){},methods:{login:function(){var e=this;h.signin(this.username,this.password,function(t,n){t?document.querySelector(".alert").innerHTML=t:e.$router.push("/lobby")})},signup:function(){var e=this;h.signup(this.username,this.password,function(t,n){t?document.querySelector(".alert").innerHTML=t:e.$router.push("/lobby")})}}},f={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-container",{attrs:{fluid:"",id:"home"}},[o("img",{staticClass:"logo",attrs:{src:n("WyGl")}}),e._v(" "),o("v-container",[o("v-flex",{staticClass:"text-xs-center login"},[o("v-text-field",{staticClass:"form-input",attrs:{type:"text",label:"Enter your username",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),o("v-text-field",{staticClass:"form-input",attrs:{type:"password",label:"Enter your password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),e._v(" "),o("button",{on:{click:e.login}},[e._v("Login")]),e._v(" "),o("button",{on:{click:e.signup}},[e._v("Sign up")]),e._v(" "),o("div",[o("a",{attrs:{href:"/api/login/google"}},[e._v("Log In with Google")])]),e._v(" "),o("div",{staticClass:"alert"})],1)},staticRenderFns:[]};var A=n("VU/8")(l,f,!1,function(e){n("axnL")},"data-v-2f63c788",null).exports,v=n("fZjL"),g=n.n(v),m=n("mvHQ"),y=n.n(m),w=(n("mCAc"),{name:"Lobby",data:function(){return{p:"",status:"",myId:"",roomCode:"",connectedPeers:{},numPeers:0,role:"",show:!0,host:!1,words:null,opponentConnection:null}},computed:{sanitizedRoomCode:function(){return this.roomCode.trim()},numPlayers:function(){return this.numPeers}},created:function(){},mounted:function(){var e=this;this.$peer.open||this.$peer.on("open",function(t){e.myId=t,e.$peer.id=e.myId})},watch:{numPeers:function(){var e=this;this.receiveConnection(),this.searchForOpponent(),this.forEachActivePeer(function(t){t.on("close",function(){alert("A player on your team has left"),t.close(),delete e.connectedPeers[t.peer]})})},opponentConnection:function(){this.receiveConnection()}},methods:{createRoom:function(){var e=this;this.$peer.open||this.$peer.on("open",function(t){e.myId=t,e.$peer.id=e.myId}),this.myId=this.$peer.id,this.host=!0;var t=new Request("/api/room",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"}});fetch(t).then(function(e){if(e.ok)return e.json();throw new Error("invalid room")}).then(function(t){e.roomCode=t.roomCode;var n=new Request("/api/room/"+e.sanitizedRoomCode,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:y()({peerId:e.myId})});fetch(n).then(function(e){if(e.ok)return e.json();throw new Error("invalid room")}).then(function(t){e.connectedPeers[e.myId]=null,e.numPeers=g()(e.connectedPeers).length}).catch(function(t){e.role="",e.status="",alert("Please try again")})}).catch(function(t){e.role="",e.status="",alert("Please try again")}),this.receiveConnection(),this.role="guesser",this.status="inRoom"},joinRoom:function(){var e=this;this.$peer.on||this.$peer.on("open",function(t){e.myId=t,e.$peer.id=e.myId}),this.myId=this.$peer.id;var t=new Request("/api/room/"+this.sanitizedRoomCode,{credentials:"include",method:"GET",headers:{"Content-Type":"application/json"}});fetch(t).then(function(e){if(e.ok)return e.json();throw new Error("invalid room")}).then(function(t){if(null!=t){var n=new Request("/api/room/"+e.sanitizedRoomCode,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:y()({peerId:e.myId})});fetch(n).then(function(e){if(e.ok)return e.json();throw new Error("invalid room")}).then(function(t){t.peers.forEach(function(t){if(!e.connectedPeers[t]&&t!==e.myId){var n=e.$peer.connect(t,{label:"handshake"});console.log("join-room | creating a connection with: ",n),n.on("open",function(){console.log("connection established with "+t),console.log(n),e.connect(n)}),n.on("error",function(e){})}e.connectedPeers[t]=n}),e.receiveConnection(),e.role="drawer",e.status="inRoom"}).catch(function(t){console.log(t),alert("You have entered an invalid game room"),e.roomCode=""})}}).catch(function(t){console.log(t),alert("You have entered an invalid game room"),e.roomCode=""})},connect:function(e){var t=this;"handshake"===e.label?(e.on("data",function(n){"move-to-game-room"===n.type&&t.moveToGameRoom(),e.on("close",function(){alert("A player on your team has left"),delete t.connectedPeers[e.peer]})}),this.connectedPeers[e.peer]=e,this.numPeers=g()(this.connectedPeers).length):"opponent-handshake"===e.label&&(this.opponentConnection=e,e.on("data",function(n){"notify-opponent"===n.type&&t.searchForOpponent(),e.on("close",function(){alert("The opposing team's host has left the game"),t.opponentConnection=null})}))},forEachActivePeer:function(e){var t=this;g()(this.connectedPeers).forEach(function(n,o){n!==t.myId&&t.$peer.connections[n].forEach(function(t){e(t)})})},searchForOpponent:function(){var e=this;if(3===this.numPeers&&this.host){var t=new Request("/api/room/"+this.sanitizedRoomCode+"/matchmake",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:y()({status:"ready"})});fetch(t).then(function(e){if(e.ok)return e.json();throw new Error("invalid room")}).then(function(t){if(t){var n=t.peers[0],o=new Request("/api/words",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:y()({usedwords:[]})});fetch(o).then(function(e){if(e.ok)return e.json();throw new Error("failed to retrieve words")}).then(function(t){if(e.words={type:"words",data:t},n!==e.myId){var o=e.$peer.connect(n,{label:"opponent-handshake"});console.log("creating a connection with: ",o),o.on("open",function(){e.opponentConnection=o,e.opponentConnection.send({type:"notify-opponent",data:null}),e.forEachActivePeer(function(e){e.send({type:"move-to-game-room",data:null})}),e.moveToGameRoom()}),o.on("error",function(e){})}else e.forEachActivePeer(function(e){e.send({type:"move-to-game-room",data:null})}),e.moveToGameRoom()}).catch(function(e){})}else e.receiveConnection()}).catch(function(e){console.log(e)})}},moveToGameRoom:function(){this.$router.replace({name:"Room",params:{myId:this.myId,role:this.role,roomCode:this.sanitizedRoomCode,connectedPeers:this.connectedPeers,words:this.words,startTime:this.startTime,endTime:this.endTime,opponentConnection:this.opponentConnection}})},receiveConnection:function(){var e=this;this.$peer.on("connection",function(t){console.log("Received a connection by",t),e.connect(t)})}}}),b={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-container",{attrs:{fluid:"",id:"lobby"}},[o("img",{staticClass:"logo",attrs:{src:n("WyGl")}}),e._v(" "),"inRoom"!==e.status?o("div",{staticClass:"create"},[o("button",{staticClass:"create-room",on:{click:e.createRoom}},[e._v("Create Room")]),e._v(" "),o("div",[e._v("OR")]),e._v(" "),o("form",{staticClass:"roomForm",on:{submit:function(t){return t.preventDefault(),e.joinRoom(t)}}},[o("v-text-field",{staticClass:"form-input",attrs:{type:"text",label:"Enter room code",name:"roomCode",id:"roomCode"},model:{value:e.roomCode,callback:function(t){e.roomCode=t},expression:"roomCode"}}),e._v(" "),o("button",{staticClass:"join-room",attrs:{type:"submit"}},[e._v("Join Room")])],1)]):o("div",{staticClass:"create"},[o("span",[o("p",[e._v("Your peer id is "+e._s(e.myId))]),e._v(" "),o("p",[e._v("Your room code is "+e._s(e.roomCode))]),e._v(" "),o("p",[e._v("There are currently "+e._s(e.numPlayers)+" players in the room")]),e._v(" "),o("button",{on:{click:e.searchForOpponent}},[e._v("Refresh")])])])])},staticRenderFns:[]};var k=n("VU/8")(w,b,!1,function(e){n("69E3")},"data-v-e644498a",null).exports,_=n("7t+N");window.jQuery=_;var C=n(!function(){var e=new Error('Cannot find module "validator"');throw e.code="MODULE_NOT_FOUND",e}()),E={name:"Room",props:["myId","role","roomCode","connectedPeers","words","opponentConnection"],data:function(){return{isRoom:!0,myRole:"",tools:["black","red","blue","yellow","green","eraser"],clickX:[],clickY:[],clickDrag:[],paint:!1,color:"black",coordinate_index:0,keyword:"",score:0,listening:0,opponent_score:10,word_index:0,data:{guesser:0,url:"",eraser:0,clear:0,keyword:"",wordIndex:0,guess:"",score:0,next_guesser:"",word_list:[],opponent_score:null},answer:"",peer:[],peerId:[],time:100,timer:"",key:0,word_list:"",count:0}},created:function(){null==this.connectedPeers&&this.$router.replace("/lobby"),this.myRole=this.role,this.word_list=this.words},mounted:function(){var e=this;g()(this.connectedPeers).forEach(function(t){t!==e.myId&&(e.peerId.push(t),e.peer.push(e.connectedPeers[t]))});var t=this.peer[0],n=this.peer[1];this.timer=setInterval(this.barMove,1e3),"drawer"==this.myRole?this.drawer_gameflow(t,n):this.guesser_gameflow(t,n),this.forEachActivePeer(function(t){t.on("close",function(){alert("A player on your team has left"),delete e.connectedPeers[t.peer],t.close()})})},methods:{drawer_gameflow:function(e,t){var n=this;n.initCanvas("canvasMe"),n.initCanvas("canvasPeer");for(var o=0;o<n.tools.length;o++){var i=n.tools[o];n.loadTools(i)}var r=document.querySelector("#canvasMe canvas"),s=document.querySelector("#canvasPeer canvas");"undefined"!=typeof G_vmlCanvasManager&&(r=G_vmlCanvasManager.initElement(r),s=G_vmlCanvasManager.initElement(s));var a=r.getContext("2d"),c=s.getContext("2d");_("#canvasMe").mousedown(function(o){o.pageX,this.offsetLeft,o.pageY,this.offsetTop;n.paint=!0,n.addClick(o.pageX-this.offsetLeft,o.pageY-this.offsetTop),n.draw(r,e,t)}),_("#canvasMe").mousemove(function(o){n.paint&&(n.addClick(o.pageX-this.offsetLeft,o.pageY-this.offsetTop,!0),n.draw(r,e,t))}),_("#canvasMe").mouseup(function(e){n.paint=!1}),_("#canvasMe").mouseleave(function(e){n.paint=!1}),document.querySelector(".clear").addEventListener("click",function(){a.clearRect(0,0,a.canvas.width,a.canvas.height),n.coordinate_index=0,n.clickX=[],n.clickY=[],n.clickDrag=[];n.data.clear=1,e.send(n.data),t.send(n.data),n.data.clear=0}),n.receiveData(e,c),n.receiveData(t,c),"guesser"==n.role&&0==n.listening&&(n.receiveOpponentScore(),n.listening=1)},guesser_gameflow:function(e,t){this.data.guesser=1,this.data.keyword=this.word_list.data[this.data.wordIndex].left_word,e.send(this.data),this.data.keyword=this.word_list.data[this.data.wordIndex].right_word,t.send(this.data),this.data.keyword="",this.initCanvas("canvas1"),this.initCanvas("canvas2");var n=document.querySelector("#canvas1 canvas"),o=document.querySelector("#canvas2 canvas");"undefined"!=typeof G_vmlCanvasManager&&(n=G_vmlCanvasManager.initElement(n),o=G_vmlCanvasManager.initElement(o));var i=n.getContext("2d"),r=o.getContext("2d");this.receiveData(e,i),this.receiveData(t,r),"guesser"==this.role&&0==this.listening&&(this.receiveOpponentScore(),this.listening=1)},barMove:function(){var e=document.getElementById("myBar");this.time<=0?(e.style.width="0%",this.count+=1,5==this.count?(clearInterval(this.timer),"guesser"==this.role&&this.opponentConnection.send(this.data.score)):"guesser"==this.myRole&&(this.data.word_list=this.word_list,this.data.wordIndex++,this.data.next_guesser=this.peerId[Math.floor(2*Math.random())],this.peer[0].send(this.data),this.peer[1].send(this.data),this.data.guesser=0,this.data.next_guesser="",this.myRole="drawer",this.key++,this.$mount(this.$el),this.drawer_gameflow(this.peer[0],this.peer[1])),this.time=100):(this.time-=5/3,e.style.width=this.time+"%")},initCanvas:function(e){var t=document.querySelector("#"+e),n=document.createElement("canvas");n.setAttribute("width",_("#"+e).css("width")),n.setAttribute("height",_("#"+e).css("height")),t.appendChild(n)},loadTools:function(e){var t=document.getElementById("tools"),o=document.createElement("img");o.className=e,o.src=n("wBho")("./"+e+".png"),o.style.marginBottom="15px",t.appendChild(o);var i=this;document.querySelector("."+e).addEventListener("click",function(){i.color=e,o.style.marginLeft="20px"})},toolDisplay:function(){for(var e=0;e<this.tools.length;e++){var t=this.tools[e];t==this.color?document.querySelector("."+t).style.marginLeft="20px":document.querySelector("."+t).style.marginLeft="0px"}},addClick:function(e,t,n){this.clickX.push(e),this.clickY.push(t),this.clickDrag.push(n)},draw:function(e,t,n){var o=e.getContext("2d");"eraser"==this.color?(o.globalCompositeOperation="destination-out",o.strokeStyle="white",o.lineWidth=10):(o.globalCompositeOperation="source-over",o.strokeStyle=this.color,o.lineWidth=5),o.lineJoin="round";for(var i=this.coordinate_index;i<this.clickX.length;i++)o.beginPath(),this.clickDrag[i]&&i?o.moveTo(this.clickX[i-1],this.clickY[i-1]):o.moveTo(this.clickX[i]-1,this.clickY[i]),o.lineTo(this.clickX[i],this.clickY[i]),o.closePath(),o.stroke(),this.coordinate_index+=1,"eraser"==this.color?(this.data.eraser=1,this.data.url=e.toDataURL(),t.send(this.data),n.send(this.data),this.data.eraser=0):(this.data.url=e.toDataURL(),t.send(this.data),n.send(this.data))},receiveData:function(e,t){var n=this,o=new Image;e.on("data",function(e){e.guesser?null!=e.opponent_score?(n.opponent_score=e.opponent_score,n.displayResult()):(""!=e.next_guesser&&(n.myId==e.next_guesser?(n.word_list=e.word_list,n.data.wordIndex=e.wordIndex,n.myRole="guesser",n.key++,n.$mount(n.$el),n.guesser_gameflow(n.peer[0],n.peer[1])):(n.key++,n.$mount(n.$el),n.drawer_gameflow(n.peer[0],n.peer[1]))),""!=e.keyword&&(n.keyword=e.keyword,n.data.wordIndex=e.wordIndex,n.score!=e.score&&(n.score=e.score,n.data.score=e.score)),""!=e.guess&&(n.answer=e.guess)):e.clear?t.clearRect(0,0,t.canvas.width,t.canvas.height):e.eraser?(o.src=e.url,o.onload=function(){t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(o,0,0,t.canvas.width,t.canvas.height)}):(o.src=e.url,o.onload=function(){t.drawImage(o,0,0,t.canvas.width,t.canvas.height)})})},sendGuess:function(){if(this.answer=C.escape(document.getElementById("post_guess").value),this.answer==this.word_list.data[this.data.wordIndex].compound_word)if(document.getElementById("post_guess").value="",this.data.guesser=1,this.score+=1,this.data.score+=1,this.data.guess=this.answer,this.data.wordIndex<this.word_list.data.length-1)this.data.wordIndex++,this.data.keyword=this.word_list.data[this.data.wordIndex].left_word,this.peer[0].send(this.data),this.data.keyword=this.word_list.data[this.data.wordIndex].right_word,this.peer[1].send(this.data),this.data.keyword="";else{var e=[];this.word_list.data.forEach(function(t){e.push(t.compound_word)}),this.getMoreWords(e)}else document.getElementById("post_guess").value="",this.data.guesser=1,this.data.guess=this.answer,this.peer[0].send(this.data),this.peer[1].send(this.data),this.data.guess=""},displayResult:function(){var e=document.getElementById("result");if(null==document.getElementById("ending")){var t=document.createElement("div");t.id="ending",this.data.score>this.opponent_score?t.innerHTML="<p>GAME END!\nCongratuations! Your team won the game!!</p>":this.data.score==this.opponent_score?t.innerHTML="<p>GAME END!\nWell done! Your team made a tie!!</p>":t.innerHTML="<p>GAME END!\nYour team lost the game....try next time!</p>",document.getElementById("result_content").prepend(t)}e.style.display="block"},receiveOpponentScore:function(){var e=this;this.opponentConnection.on("data",function(t){e.opponent_score=t,e.data.opponent_score=e.opponent_score,e.data.guesser=1,e.peer[0].send(e.data),e.peer[1].send(e.data),e.displayResult()})},backToLobby:function(){document.getElementById("result").style.display="none",this.$router.go()},getMoreWords:function(e){var t=this,n=new Request("/api/words",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:y()({usedwords:e})});fetch(n).then(function(e){if(e.ok)return e.json();throw new Error("failed to retrieve words")}).then(function(e){t.word_list={type:"words",data:e},t.data.wordIndex=0,t.data.keyword=t.word_list.data[t.data.wordIndex].left_word,t.peer[0].send(t.data),t.data.keyword=t.word_list.data[t.data.wordIndex].right_word,t.peer[1].send(t.data),t.data.keyword=""}).catch(function(e){})},forEachActivePeer:function(e){var t=this;g()(this.connectedPeers).forEach(function(n,o){n!==t.myId&&t.$peer.connections[n].forEach(function(t){e(t)})})}}},B={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{key:e.key,attrs:{id:"game"}},[e._m(0),e._v(" "),n("div",{attrs:{id:"result"}},[n("span",{attrs:{id:"close"},on:{click:e.backToLobby}},[e._v("Ã—")]),e._v(" "),n("div",{attrs:{id:"result_content"}},[n("p",[e._v("Your team made "+e._s(this.data.score)+" correct guesses!")]),e._v(" "),n("p",[e._v("Hope to See U Again")])])]),e._v(" "),"guesser"===e.myRole?n("div",{attrs:{id:"guesserContainer"}},[n("div",{staticClass:"canvas",attrs:{id:"canvas1"}}),e._v(" "),n("div",{staticClass:"canvas",attrs:{id:"canvas2"}}),e._v(" "),n("div",{staticClass:"guesser_area"},[n("div",{attrs:{id:"infoBoard"}},[n("div",{staticClass:"score"},[e._v("SCORE: "+e._s(e.score))]),e._v(" "),n("input",{attrs:{type:"text",id:"post_guess",placeholder:"TAKE A GUESS",required:""}}),e._v(" "),n("button",{staticClass:"btn",on:{click:e.sendGuess}},[e._v("Submit Guess")])])])]):n("div",{attrs:{id:"drawerContainer"}},[n("div",{attrs:{id:"keyword"}},[e._v("YOUR KEY WORD: "+e._s(e.keyword))]),e._v(" "),n("div",{staticClass:"canvas",attrs:{id:"canvasMe"}}),e._v(" "),n("div",{attrs:{id:"tools"},on:{click:e.toolDisplay}}),e._v(" "),n("div",{staticClass:"canvas",attrs:{id:"canvasPeer"}}),e._v(" "),n("div",{staticClass:"clear"},[e._v("CLEAR")]),e._v(" "),n("div",{attrs:{id:"infoBoard"}},[n("div",[e._v("GUESSER'S ANSWER GUESS: "+e._s(e.answer))]),e._v(" "),n("div",[e._v("SCORE: "+e._s(this.data.score))])])]),e._v(" "),n("div",[e._v("\n    Room: "+e._s(this.roomCode)+"\n    "),n("div",[e._v("My role is "+e._s(e.role))])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"myProgress"}},[t("div",{attrs:{id:"myBar"}})])}]};var R=n("VU/8")(E,B,!1,function(e){n("TFdE"),n("+G+1")},null,null).exports,S={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-container",{attrs:{fluid:"",id:"home"}},[t("img",{staticClass:"logo",attrs:{src:n("WyGl")}}),this._v(" "),t("h1",[this._v("404 Not Found")]),this._v(" "),t("button",{on:{click:this.home}},[this._v("Go to Home Page")])])},staticRenderFns:[]};var T=n("VU/8")({name:"NotFoundComponent",methods:{home:function(){this.$router.push("/")}}},S,!1,function(e){n("4tNt")},"data-v-31f51f6a",null).exports;function x(e,t,n){d.default.getCurrentUser()?n():(console.log("CHECKING FOR CURRENT USER"),n({path:"/"}))}o.a.use(p.a);var I=new p.a({mode:"history",routes:[{path:"/",name:"Home",component:A},{path:"/lobby",name:"Lobby",component:k,beforeEnter:x},{path:"/room/:roomCode",name:"Room",component:R,beforeEnter:x,props:!0},{path:"*",name:"NotFoundComponent",component:T}]});n("OF5A");n("7zck"),o.a.use(r.a),o.a.config.productionTip=!1;var P=new a.a({host:"drawalot-peerjs.herokuapp.com",port:443,secure:!0});o.a.prototype.$peer=P,new o.a({el:"#app",router:I,components:{App:u},template:"<App/>"})},TFdE:function(e,t){},VTQS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("mvHQ"),i=n.n(o),r=function(){var e={};function t(e,t,n,o){var r=new XMLHttpRequest;r.onload=function(){200!==r.status?o("["+r.status+"]"+r.responseText,null):o(null,JSON.parse(r.responseText))},r.open(e,t,!0),n?(r.setRequestHeader("Content-Type","application/json"),r.send(i()(n))):r.send()}return e.getCurrentUser=function(){console.log("getCurrentUser");var e=document.cookie.split("username=");return console.log(e),e.length>1?e[1]:null},e.signup=function(e,n,o){t("POST","/api/signup/",{username:e,password:n},o)},e.signin=function(e,n,o){t("POST","/api/signin/",{username:e,password:n},o)},e.signout=function(e){t("GET","/api/signout/",e)},e.getUsernames=function(e){t("GET","/api/usernames/",null,e)},e.createGameRoom=function(e){t("POST","/api/room/createroom/",null,e)},e}();t.default=r},WyGl:function(e,t,n){e.exports=n.p+"static/img/logo.6b4ed09.png"},ZFrl:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAlQTFRF3d3d////mGkoswi1CwAAACZJREFUeNpiYCAKMBIEIEVMBMCoolFFo4pGFQ2UImIKMSIAQIABAC3mCIUCx3laAAAAAElFTkSuQmCC"},aOdu:function(e,t){e.exports="data:image/png;base64,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"},axnL:function(e,t){},bKhN:function(e,t){e.exports="data:image/png;base64,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"},fkQO:function(e,t){},iZrf:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF0AAAAuCAYAAABKxxWsAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAE2ElEQVR4Xu2buy8tURTG1xzvVyFe0ehEVAoKjyBRimg1tKISBYVSR6klEp1oJRIaRCJR0ar8AUJIvJ/3+nbmG2v2neMON3eOMzNfsrL3vI69f3tZe+195ji/3iWpIlXGLVNFqBR6DpRCz4Gc19dXL6ZnC++O4/hKSNdTfU3Ow8ODD/rb25sPPuBmMhlTassXsa12CeWqH8719bVH+N3rDXQNHg2D5SN4thEl249S94XXo5RzeXnpQX95eTFG+ADPxunGsswH2e0vKCgwxmPdl6j65JydnXnQn5+f5enpyQMP6ASvG4o6O/OTpWGyD7DCwkJjPGa/eO//Fv7CRwD/REdHR6ahhA776dCpbNCLioo8+Bo8pPvGetC57whPhoKezyopKZH6+noZHh6WycnJP6DDCF0D1qava/uOfOHl8fFR7u/vTfme1ZhQ09PT416Nh4qLi2VmZkZGR0cNdIIPgg7xPP9LaEH3hpVvIiV0AIfhuLOz01xDeXh4aOpx0MDAgCwuLnqeboPU2Ruu8T4YBupf4PtSRkykgK7Bd3R0uFfjp7a2NlldXfUAAhoMwHX2hmv8r8B/CksOln4WYplNvsURoQM2SzQsbqqtrZXz83P3KJyQSAA05gcaBwLwGYLCwM/wQRo+mB+OMo4C8OrqavconPr7+2V9fV1ub2/l7u7OmI4KmP/gtHqNwxBly7efjvwcH6CtubnZvRpPHR8fGy+FuBoHB8xnfX195rxWTU2NzM7OyuDgoM9RWWfch9dni/eJ32VkqCA4DY2qrKx0ayIXFxcyPT0t3d3dsru7azye3g+vx2DB4zFw9HhbKXQXug0fRt3c3Li1D11dXcn4+LgMDQ3JycmJAQ9juLHBa/iJh875i8BpGvpnOj09NYuuiYkJMxDweHo747utFLoLWXs7Lazgxfv7+9LV1SUrKys+6LaXQ4mHzlQvyMKqrq7OfA5ALywsyNjYmC+LsZV46EFCpsGMJowwuVZUVLhHIqWlpW4tWCn0AME7g2JxNuHe95W9GayRkRFZWloyg6ZTRq3EQwcwhIIg+4qqqqpkeXlZ5ubmvIkYIQrQbfCJh444jNUkJj/bwqqpqUkODg6kt7dXysrKTHgh9KAwlXjoGjLga/ubMIGura3J9va2iemw8vJyk/lo6La3Jx667eU45sImm7BiRV6+t7dndmEBmgYvt8OLrdTTLdgEni2mt7e3y87OjkxNTZlQQtiow8MBHIOiJ1EbfGI3vADmM2+2hV3J+fl5swDSgOnV3K9h1gIFeTnke8MLo6yBYx+htbXVvZpsYTeSK1WGEHo1gQNyNu/WSuSXGFRjY6Nsbm4aYPRSSufpBEvQGjifCwObSuzXdYjDW1tb5lskgCNACOAYdQGU12E6lMBwLy2sMohrNKZKekKh4BVxEWLyxsaGNDQ0mFDBiZATI0qmgEwDcU5nJgBPD/8KcChxr2CgP9gJBDgYw4SGCBEmjOc1ZNp3hKc86HEVPLSlpcV844Psg7BZMlTY0KnPzn1HeDIU9Hx9rQ5thLHd6AO9nB6ugUfRp9i+QKrbpttN8ISt+xJVf2L9qjTbqKGzJGwcQ1H2J/Y/CtBG+Poc74tSsf75i24n60Hnolb6Q68cKP3FdA6U+K3dXCiFngOl0COXyG9eJA+vmUmC9gAAAABJRU5ErkJggg=="},mCAc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n("pFYg"),r=n.n(i),s=n("OvRC"),a=n.n(s),c=n("fZjL"),u=n.n(c),d=n("mvHQ"),p=n.n(d);!function e(t,n,i){function r(a,c){if(!n[a]){if(!t[a]){if(!c&&("function"==typeof o&&o))return o(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return r(n||e)},d,d.exports,e,t,n,i)}return n[a].exports}for(var s="function"==typeof o&&o,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){t.exports.RTCSessionDescription=window.RTCSessionDescription||window.mozRTCSessionDescription,t.exports.RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,t.exports.RTCIceCandidate=window.RTCIceCandidate||window.mozRTCIceCandidate},{}],2:[function(e,t,n){var o=e("./util"),i=e("eventemitter3"),r=e("./negotiator"),s=e("reliable");function a(e,t,n){if(!(this instanceof a))return new a(e,t,n);i.call(this),this.options=o.extend({serialization:"binary",reliable:!1},n),this.open=!1,this.type="data",this.peer=e,this.provider=t,this.id=this.options.connectionId||a._idPrefix+o.randomToken(),this.label=this.options.label||this.id,this.metadata=this.options.metadata,this.serialization=this.options.serialization,this.reliable=this.options.reliable,this._buffer=[],this._buffering=!1,this.bufferSize=0,this._chunkedData={},this.options._payload&&(this._peerBrowser=this.options._payload.browser),r.startConnection(this,this.options._payload||{originator:!0})}o.inherits(a,i),a._idPrefix="dc_",a.prototype.initialize=function(e){this._dc=this.dataChannel=e,this._configureDataChannel()},a.prototype._configureDataChannel=function(){var e=this;o.supports.sctp&&(this._dc.binaryType="arraybuffer"),this._dc.onopen=function(){o.log("Data channel connection success"),e.open=!0,e.emit("open")},!o.supports.sctp&&this.reliable&&(this._reliable=new s(this._dc,o.debug)),this._reliable?this._reliable.onmessage=function(t){e.emit("data",t)}:this._dc.onmessage=function(t){e._handleDataMessage(t)},this._dc.onclose=function(t){o.log("DataChannel closed for:",e.peer),e.close()}},a.prototype._handleDataMessage=function(e){var t=this,n=e.data,i=n.constructor;if("binary"===this.serialization||"binary-utf8"===this.serialization){if(i===Blob)return void o.blobToArrayBuffer(n,function(e){n=o.unpack(e),t.emit("data",n)});if(i===ArrayBuffer)n=o.unpack(n);else if(i===String){var r=o.binaryStringToArrayBuffer(n);n=o.unpack(r)}}else"json"===this.serialization&&(n=JSON.parse(n));if(n.__peerData){var s=n.__peerData,a=this._chunkedData[s]||{data:[],count:0,total:n.total};return a.data[n.n]=n.data,a.count+=1,a.total===a.count&&(delete this._chunkedData[s],n=new Blob(a.data),this._handleDataMessage({data:n})),void(this._chunkedData[s]=a)}this.emit("data",n)},a.prototype.close=function(){this.open&&(this.open=!1,r.cleanup(this),this.emit("close"))},a.prototype.send=function(e,t){if(this.open)if(this._reliable)this._reliable.send(e);else{var n=this;if("json"===this.serialization)this._bufferedSend(p()(e));else if("binary"===this.serialization||"binary-utf8"===this.serialization){var i=o.pack(e);if((o.chunkedBrowsers[this._peerBrowser]||o.chunkedBrowsers[o.browser])&&!t&&i.size>o.chunkedMTU)return void this._sendChunks(i);o.supports.sctp?o.supports.binaryBlob?this._bufferedSend(i):o.blobToArrayBuffer(i,function(e){n._bufferedSend(e)}):o.blobToBinaryString(i,function(e){n._bufferedSend(e)})}else this._bufferedSend(e)}else this.emit("error",new Error("Connection is not open. You should listen for the `open` event before sending messages."))},a.prototype._bufferedSend=function(e){!this._buffering&&this._trySend(e)||(this._buffer.push(e),this.bufferSize=this._buffer.length)},a.prototype._trySend=function(e){try{this._dc.send(e)}catch(e){this._buffering=!0;var t=this;return setTimeout(function(){t._buffering=!1,t._tryBuffer()},100),!1}return!0},a.prototype._tryBuffer=function(){if(0!==this._buffer.length){var e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this.bufferSize=this._buffer.length,this._tryBuffer())}},a.prototype._sendChunks=function(e){for(var t=o.chunk(e),n=0,i=t.length;n<i;n+=1){e=t[n];this.send(e,!0)}},a.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case"ANSWER":this._peerBrowser=t.browser,r.handleSDP(e.type,this,t.sdp);break;case"CANDIDATE":r.handleCandidate(this,t.candidate);break;default:o.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}},t.exports=a},{"./negotiator":5,"./util":8,eventemitter3:9,reliable:12}],3:[function(e,t,n){window.Socket=e("./socket"),window.MediaConnection=e("./mediaconnection"),window.DataConnection=e("./dataconnection"),window.Peer=e("./peer"),window.RTCPeerConnection=e("./adapter").RTCPeerConnection,window.RTCSessionDescription=e("./adapter").RTCSessionDescription,window.RTCIceCandidate=e("./adapter").RTCIceCandidate,window.Negotiator=e("./negotiator"),window.util=e("./util"),window.BinaryPack=e("js-binarypack")},{"./adapter":1,"./dataconnection":2,"./mediaconnection":4,"./negotiator":5,"./peer":6,"./socket":7,"./util":8,"js-binarypack":10}],4:[function(e,t,n){var o=e("./util"),i=e("eventemitter3"),r=e("./negotiator");function s(e,t,n){if(!(this instanceof s))return new s(e,t,n);i.call(this),this.options=o.extend({},n),this.open=!1,this.type="media",this.peer=e,this.provider=t,this.metadata=this.options.metadata,this.localStream=this.options._stream,this.id=this.options.connectionId||s._idPrefix+o.randomToken(),this.localStream&&r.startConnection(this,{_stream:this.localStream,originator:!0})}o.inherits(s,i),s._idPrefix="mc_",s.prototype.addStream=function(e){o.log("Receiving stream",e),this.remoteStream=e,this.emit("stream",e)},s.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case"ANSWER":r.handleSDP(e.type,this,t.sdp),this.open=!0;break;case"CANDIDATE":r.handleCandidate(this,t.candidate);break;default:o.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}},s.prototype.answer=function(e){if(this.localStream)o.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this.options._payload._stream=e,this.localStream=e,r.startConnection(this,this.options._payload);for(var t=this.provider._getMessages(this.id),n=0,i=t.length;n<i;n+=1)this.handleMessage(t[n]);this.open=!0}},s.prototype.close=function(){this.open&&(this.open=!1,r.cleanup(this),this.emit("close"))},t.exports=s},{"./negotiator":5,"./util":8,eventemitter3:9}],5:[function(e,t,n){var o=e("./util"),i=e("./adapter").RTCPeerConnection,r=e("./adapter").RTCSessionDescription,s=e("./adapter").RTCIceCandidate,a={pcs:{data:{},media:{}},queue:[],_idPrefix:"pc_",startConnection:function(e,t){var n=a._getPeerConnection(e,t);if("media"===e.type&&t._stream&&n.addStream(t._stream),e.pc=e.peerConnection=n,t.originator){if("data"===e.type){var i={};o.supports.sctp||(i={reliable:t.reliable});var r=n.createDataChannel(e.label,i);e.initialize(r)}o.supports.onnegotiationneeded||a._makeOffer(e)}else a.handleSDP("OFFER",e,t.sdp)},_getPeerConnection:function(e,t){a.pcs[e.type]||o.error(e.type+" is not a valid connection type. Maybe you overrode the `type` property somewhere."),a.pcs[e.type][e.peer]||(a.pcs[e.type][e.peer]={});var n;a.pcs[e.type][e.peer];return t.pc&&(n=a.pcs[e.type][e.peer][t.pc]),n&&"stable"===n.signalingState||(n=a._startPeerConnection(e)),n},_startPeerConnection:function(e){o.log("Creating RTCPeerConnection.");var t=a._idPrefix+o.randomToken(),n={};"data"!==e.type||o.supports.sctp?"media"===e.type&&(n={optional:[{DtlsSrtpKeyAgreement:!0}]}):n={optional:[{RtpDataChannels:!0}]};var r=new i(e.provider.options.config,n);return a.pcs[e.type][e.peer][t]=r,a._setupListeners(e,r,t),r},_setupListeners:function(e,t,n){var i=e.peer,r=e.id,s=e.provider;o.log("Listening for ICE candidates."),t.onicecandidate=function(t){t.candidate&&(o.log("Received ICE candidates for:",e.peer),s.socket.send({type:"CANDIDATE",payload:{candidate:t.candidate,type:e.type,connectionId:e.id},dst:i}))},t.oniceconnectionstatechange=function(){switch(t.iceConnectionState){case"disconnected":case"failed":o.log("iceConnectionState is disconnected, closing connections to "+i),e.close();break;case"completed":t.onicecandidate=o.noop}},t.onicechange=t.oniceconnectionstatechange,o.log("Listening for `negotiationneeded`"),t.onnegotiationneeded=function(){o.log("`negotiationneeded` triggered"),"stable"==t.signalingState?a._makeOffer(e):o.log("onnegotiationneeded triggered when not stable. Is another connection being established?")},o.log("Listening for data channel"),t.ondatachannel=function(e){o.log("Received data channel");var t=e.channel;s.getConnection(i,r).initialize(t)},o.log("Listening for remote stream"),t.onaddstream=function(e){o.log("Received remote stream");var t=e.stream,n=s.getConnection(i,r);"media"===n.type&&n.addStream(t)}},cleanup:function(e){o.log("Cleaning up PeerConnection to "+e.peer);var t=e.pc;!t||"closed"===t.readyState&&"closed"===t.signalingState||(t.close(),e.pc=null)},_makeOffer:function(e){var t=e.pc;t.createOffer(function(n){o.log("Created offer."),!o.supports.sctp&&"data"===e.type&&e.reliable&&(n.sdp=Reliable.higherBandwidthSDP(n.sdp)),t.setLocalDescription(n,function(){o.log("Set localDescription: offer","for:",e.peer),e.provider.socket.send({type:"OFFER",payload:{sdp:n,type:e.type,label:e.label,connectionId:e.id,reliable:e.reliable,serialization:e.serialization,metadata:e.metadata,browser:o.browser},dst:e.peer})},function(t){e.provider.emitError("webrtc",t),o.log("Failed to setLocalDescription, ",t)})},function(t){e.provider.emitError("webrtc",t),o.log("Failed to createOffer, ",t)},e.options.constraints)},_makeAnswer:function(e){var t=e.pc;t.createAnswer(function(n){o.log("Created answer."),!o.supports.sctp&&"data"===e.type&&e.reliable&&(n.sdp=Reliable.higherBandwidthSDP(n.sdp)),t.setLocalDescription(n,function(){o.log("Set localDescription: answer","for:",e.peer),e.provider.socket.send({type:"ANSWER",payload:{sdp:n,type:e.type,connectionId:e.id,browser:o.browser},dst:e.peer})},function(t){e.provider.emitError("webrtc",t),o.log("Failed to setLocalDescription, ",t)})},function(t){e.provider.emitError("webrtc",t),o.log("Failed to create answer, ",t)})},handleSDP:function(e,t,n){n=new r(n);var i=t.pc;o.log("Setting remote description",n),i.setRemoteDescription(n,function(){o.log("Set remoteDescription:",e,"for:",t.peer),"OFFER"===e&&a._makeAnswer(t)},function(e){t.provider.emitError("webrtc",e),o.log("Failed to setRemoteDescription, ",e)})},handleCandidate:function(e,t){var n=t.candidate,i=t.sdpMLineIndex;e.pc.addIceCandidate(new s({sdpMLineIndex:i,candidate:n})),o.log("Added ICE candidate for:",e.peer)}};t.exports=a},{"./adapter":1,"./util":8}],6:[function(e,t,n){var o=e("./util"),i=e("eventemitter3"),r=e("./socket"),s=e("./mediaconnection"),a=e("./dataconnection");function c(e,t){if(!(this instanceof c))return new c(e,t);i.call(this),e&&e.constructor==Object?(t=e,e=void 0):e&&(e=e.toString()),t=o.extend({debug:0,host:o.CLOUD_HOST,port:o.CLOUD_PORT,key:"peerjs",path:"/",token:o.randomToken(),config:o.defaultConfig},t),this.options=t,"/"===t.host&&(t.host=window.location.hostname),"/"!==t.path[0]&&(t.path="/"+t.path),"/"!==t.path[t.path.length-1]&&(t.path+="/"),void 0===t.secure&&t.host!==o.CLOUD_HOST&&(t.secure=o.isSecure()),t.logFunction&&o.setLogFunction(t.logFunction),o.setLogLevel(t.debug),o.supports.audioVideo||o.supports.data?o.validateId(e)?o.validateKey(t.key)?t.secure&&"0.peerjs.com"===t.host?this._delayedAbort("ssl-unavailable","The cloud server currently does not support HTTPS. Please run your own PeerServer to use HTTPS."):(this.destroyed=!1,this.disconnected=!1,this.open=!1,this.connections={},this._lostMessages={},this._initializeServerConnection(),e?this._initialize(e):this._retrieveId()):this._delayedAbort("invalid-key",'API KEY "'+t.key+'" is invalid'):this._delayedAbort("invalid-id",'ID "'+e+'" is invalid'):this._delayedAbort("browser-incompatible","The current browser does not support WebRTC")}o.inherits(c,i),c.prototype._initializeServerConnection=function(){var e=this;this.socket=new r(this.options.secure,this.options.host,this.options.port,this.options.path,this.options.key),this.socket.on("message",function(t){e._handleMessage(t)}),this.socket.on("error",function(t){e._abort("socket-error",t)}),this.socket.on("disconnected",function(){e.disconnected||(e.emitError("network","Lost connection to server."),e.disconnect())}),this.socket.on("close",function(){e.disconnected||e._abort("socket-closed","Underlying socket is already closed.")})},c.prototype._retrieveId=function(e){var t=this,n=new XMLHttpRequest,i=(this.options.secure?"https://":"http://")+this.options.host+":"+this.options.port+this.options.path+this.options.key+"/id";i+="?ts="+(new Date).getTime()+Math.random(),n.open("get",i,!0),n.onerror=function(e){o.error("Error retrieving ID",e);var n="";"/"===t.options.path&&t.options.host!==o.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),t._abort("server-error","Could not get an ID from the server."+n)},n.onreadystatechange=function(){4===n.readyState&&(200===n.status?t._initialize(n.responseText):n.onerror())},n.send(null)},c.prototype._initialize=function(e){this.id=e,this.socket.start(this.id,this.options.token)},c.prototype._handleMessage=function(e){var t,n=e.type,i=e.payload,r=e.src;switch(n){case"OPEN":this.emit("open",this.id),this.open=!0;break;case"ERROR":this._abort("server-error",i.msg);break;case"ID-TAKEN":this._abort("unavailable-id","ID `"+this.id+"` is taken");break;case"INVALID-KEY":this._abort("invalid-key",'API KEY "'+this.options.key+'" is invalid');break;case"LEAVE":o.log("Received leave message from",r),this._cleanupPeer(r);break;case"EXPIRE":this.emitError("peer-unavailable","Could not connect to peer "+r);break;case"OFFER":var c=i.connectionId;if(t=this.getConnection(r,c))o.warn("Offer received for existing Connection ID:",c);else{if("media"===i.type)t=new s(r,this,{connectionId:c,_payload:i,metadata:i.metadata}),this._addConnection(r,t),this.emit("call",t);else{if("data"!==i.type)return void o.warn("Received malformed connection type:",i.type);t=new a(r,this,{connectionId:c,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable}),this._addConnection(r,t),this.emit("connection",t)}for(var u=this._getMessages(c),d=0,p=u.length;d<p;d+=1)t.handleMessage(u[d])}break;default:if(!i)return void o.warn("You received a malformed message from "+r+" of type "+n);var h=i.connectionId;(t=this.getConnection(r,h))&&t.pc?t.handleMessage(e):h?this._storeMessage(h,e):o.warn("You received an unrecognized message:",e)}},c.prototype._storeMessage=function(e,t){this._lostMessages[e]||(this._lostMessages[e]=[]),this._lostMessages[e].push(t)},c.prototype._getMessages=function(e){var t=this._lostMessages[e];return t?(delete this._lostMessages[e],t):[]},c.prototype.connect=function(e,t){if(this.disconnected)return o.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError("disconnected","Cannot connect to new Peer after disconnecting from server.");var n=new a(e,this,t);return this._addConnection(e,n),n},c.prototype.call=function(e,t,n){if(this.disconnected)return o.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError("disconnected","Cannot connect to new Peer after disconnecting from server.");if(t){(n=n||{})._stream=t;var i=new s(e,this,n);return this._addConnection(e,i),i}o.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},c.prototype._addConnection=function(e,t){this.connections[e]||(this.connections[e]=[]),this.connections[e].push(t)},c.prototype.getConnection=function(e,t){var n=this.connections[e];if(!n)return null;for(var o=0,i=n.length;o<i;o++)if(n[o].id===t)return n[o];return null},c.prototype._delayedAbort=function(e,t){var n=this;o.setZeroTimeout(function(){n._abort(e,t)})},c.prototype._abort=function(e,t){o.error("Aborting!"),this._lastServerId?this.disconnect():this.destroy(),this.emitError(e,t)},c.prototype.emitError=function(e,t){o.error("Error:",t),"string"==typeof t&&(t=new Error(t)),t.type=e,this.emit("error",t)},c.prototype.destroy=function(){this.destroyed||(this._cleanup(),this.disconnect(),this.destroyed=!0)},c.prototype._cleanup=function(){if(this.connections)for(var e=u()(this.connections),t=0,n=e.length;t<n;t++)this._cleanupPeer(e[t]);this.emit("close")},c.prototype._cleanupPeer=function(e){for(var t=this.connections[e],n=0,o=t.length;n<o;n+=1)t[n].close()},c.prototype.disconnect=function(){var e=this;o.setZeroTimeout(function(){e.disconnected||(e.disconnected=!0,e.open=!1,e.socket&&e.socket.close(),e.emit("disconnected",e.id),e._lastServerId=e.id,e.id=null)})},c.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)o.log("Attempting reconnection to server with ID "+this._lastServerId),this.disconnected=!1,this._initializeServerConnection(),this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer "+this.id+" cannot reconnect because it is not disconnected from the server!");o.error("In a hurry? We're still trying to make the initial connection!")}},c.prototype.listAllPeers=function(e){e=e||function(){};var t=this,n=new XMLHttpRequest,i=(this.options.secure?"https://":"http://")+this.options.host+":"+this.options.port+this.options.path+this.options.key+"/peers";i+="?ts="+(new Date).getTime()+Math.random(),n.open("get",i,!0),n.onerror=function(n){t._abort("server-error","Could not get peers from the server."),e([])},n.onreadystatechange=function(){if(4===n.readyState){if(401===n.status){var i="";throw i=t.options.host!==o.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",e([]),new Error("It doesn't look like you have permission to list peers IDs. "+i)}200!==n.status?e([]):e(JSON.parse(n.responseText))}},n.send(null)},t.exports=c},{"./dataconnection":2,"./mediaconnection":4,"./socket":7,"./util":8,eventemitter3:9}],7:[function(e,t,n){var o=e("./util"),i=e("eventemitter3");function r(e,t,n,o,s){if(!(this instanceof r))return new r(e,t,n,o,s);i.call(this),this.disconnected=!1,this._queue=[];var a=e?"https://":"http://",c=e?"wss://":"ws://";this._httpUrl=a+t+":"+n+o+s,this._wsUrl=c+t+":"+n+o+"peerjs?key="+s}o.inherits(r,i),r.prototype.start=function(e,t){this.id=e,this._httpUrl+="/"+e+"/"+t,this._wsUrl+="&id="+e+"&token="+t,this._startXhrStream(),this._startWebSocket()},r.prototype._startWebSocket=function(e){var t=this;this._socket||(this._socket=new WebSocket(this._wsUrl),this._socket.onmessage=function(e){try{var n=JSON.parse(e.data)}catch(t){return void o.log("Invalid server message",e.data)}t.emit("message",n)},this._socket.onclose=function(e){o.log("Socket closed."),t.disconnected=!0,t.emit("disconnected")},this._socket.onopen=function(){t._timeout&&(clearTimeout(t._timeout),setTimeout(function(){t._http.abort(),t._http=null},5e3)),t._sendQueuedMessages(),o.log("Socket open")})},r.prototype._startXhrStream=function(e){try{var t=this;this._http=new XMLHttpRequest,this._http._index=1,this._http._streamIndex=e||0,this._http.open("post",this._httpUrl+"/id?i="+this._http._streamIndex,!0),this._http.onerror=function(){clearTimeout(t._timeout),t.emit("disconnected")},this._http.onreadystatechange=function(){2==this.readyState&&this.old?(this.old.abort(),delete this.old):this.readyState>2&&200===this.status&&this.responseText&&t._handleStream(this)},this._http.send(null),this._setHTTPTimeout()}catch(e){o.log("XMLHttpRequest not available; defaulting to WebSockets")}},r.prototype._handleStream=function(e){var t=e.responseText.split("\n");if(e._buffer)for(;e._buffer.length>0;){var n=e._buffer.shift(),i=t[n];try{i=JSON.parse(i)}catch(t){e._buffer.shift(n);break}this.emit("message",i)}var r=t[e._index];if(r)if(e._index+=1,e._index===t.length)e._buffer||(e._buffer=[]),e._buffer.push(e._index-1);else{try{r=JSON.parse(r)}catch(e){return void o.log("Invalid server message",r)}this.emit("message",r)}},r.prototype._setHTTPTimeout=function(){var e=this;this._timeout=setTimeout(function(){var t=e._http;e._wsOpen()?t.abort():(e._startXhrStream(t._streamIndex+1),e._http.old=t)},25e3)},r.prototype._wsOpen=function(){return this._socket&&1==this._socket.readyState},r.prototype._sendQueuedMessages=function(){for(var e=0,t=this._queue.length;e<t;e+=1)this.send(this._queue[e])},r.prototype.send=function(e){if(!this.disconnected)if(this.id)if(e.type){var t=p()(e);if(this._wsOpen())this._socket.send(t);else{var n=new XMLHttpRequest,o=this._httpUrl+"/"+e.type.toLowerCase();n.open("post",o,!0),n.setRequestHeader("Content-Type","application/json"),n.send(t)}}else this.emit("error","Invalid message");else this._queue.push(e)},r.prototype.close=function(){!this.disconnected&&this._wsOpen()&&(this._socket.close(),this.disconnected=!0)},t.exports=r},{"./util":8,eventemitter3:9}],8:[function(e,t,n){var o={iceServers:[{url:"stun:stun.l.google.com:19302"}]},i=1,r=e("js-binarypack"),s=e("./adapter").RTCPeerConnection,c={noop:function(){},CLOUD_HOST:"0.peerjs.com",CLOUD_PORT:9e3,chunkedBrowsers:{Chrome:1},chunkedMTU:16300,logLevel:0,setLogLevel:function(e){var t=parseInt(e,10);isNaN(parseInt(e,10))?c.logLevel=e?3:0:c.logLevel=t,c.log=c.warn=c.error=c.noop,c.logLevel>0&&(c.error=c._printWith("ERROR")),c.logLevel>1&&(c.warn=c._printWith("WARNING")),c.logLevel>2&&(c.log=c._print)},setLogFunction:function(e){e.constructor!==Function?c.warn("The log function you passed in is not a function. Defaulting to regular logs."):c._print=e},_printWith:function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e),c._print.apply(c,t)}},_print:function(){var e=!1,t=Array.prototype.slice.call(arguments);t.unshift("PeerJS: ");for(var n=0,o=t.length;n<o;n++)t[n]instanceof Error&&(t[n]="("+t[n].name+") "+t[n].message,e=!0);e?console.error.apply(console,t):console.log.apply(console,t)},defaultConfig:o,browser:window.mozRTCPeerConnection?"Firefox":window.webkitRTCPeerConnection?"Chrome":window.RTCPeerConnection?"Supported":"Unsupported",supports:function(){if(void 0===s)return{};var e,t,n=!0,i=!0,r=!1,a=!1,u=!!window.webkitRTCPeerConnection;try{e=new s(o,{optional:[{RtpDataChannels:!0}]})}catch(e){n=!1,i=!1}if(n)try{t=e.createDataChannel("_PEERJSTEST")}catch(e){n=!1}if(n){try{t.binaryType="blob",r=!0}catch(e){}var d=new s(o,{});try{a=d.createDataChannel("_PEERJSRELIABLETEST",{}).reliable}catch(e){}d.close()}if(i&&(i=!!e.addStream),!u&&n){var p=new s(o,{optional:[{RtpDataChannels:!0}]});p.onnegotiationneeded=function(){u=!0,c&&c.supports&&(c.supports.onnegotiationneeded=!0)},p.createDataChannel("_PEERJSNEGOTIATIONTEST"),setTimeout(function(){p.close()},1e3)}return e&&e.close(),{audioVideo:i,data:n,binaryBlob:r,binary:a,reliable:a,sctp:a,onnegotiationneeded:u}}(),validateId:function(e){return!e||/^[A-Za-z0-9_-]+(?:[ _-][A-Za-z0-9]+)*$/.exec(e)},validateKey:function(e){return!e||/^[A-Za-z0-9_-]+(?:[ _-][A-Za-z0-9]+)*$/.exec(e)},debug:!1,inherits:function(e,t){e.super_=t,e.prototype=a()(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},pack:r.pack,unpack:r.unpack,log:function(){if(c.debug){var e=!1,t=Array.prototype.slice.call(arguments);t.unshift("PeerJS: ");for(var n=0,o=t.length;n<o;n++)t[n]instanceof Error&&(t[n]="("+t[n].name+") "+t[n].message,e=!0);e?console.error.apply(console,t):console.log.apply(console,t)}},setZeroTimeout:function(e){var t=[],n="zero-timeout-message";function o(o){o.source==e&&o.data==n&&(o.stopPropagation&&o.stopPropagation(),t.length&&t.shift()())}return e.addEventListener?e.addEventListener("message",o,!0):e.attachEvent&&e.attachEvent("onmessage",o),function(o){t.push(o),e.postMessage(n,"*")}}(window),chunk:function(e){for(var t=[],n=e.size,o=0,r=0,s=Math.ceil(n/c.chunkedMTU);o<n;){var a=Math.min(n,o+c.chunkedMTU),u=e.slice(o,a),d={__peerData:i,n:r,data:u,total:s};t.push(d),o=a,r+=1}return i+=1,t},blobToArrayBuffer:function(e,t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsArrayBuffer(e)},blobToBinaryString:function(e,t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsBinaryString(e)},binaryStringToArrayBuffer:function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer},randomToken:function(){return Math.random().toString(36).substr(2)},isSecure:function(){return"https:"===location.protocol}};t.exports=c},{"./adapter":1,"js-binarypack":10}],9:[function(e,t,n){function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(){}i.prototype._events=void 0,i.prototype.listeners=function(e){if(!this._events||!this._events[e])return[];for(var t=0,n=this._events[e].length,o=[];t<n;t++)o.push(this._events[e][t].fn);return o},i.prototype.emit=function(e,t,n,o,i,r){if(!this._events||!this._events[e])return!1;var s,a,c,u=this._events[e],d=u.length,p=arguments.length,h=u[0];if(1===d){switch(h.once&&this.removeListener(e,h.fn,!0),p){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,n),!0;case 4:return h.fn.call(h.context,t,n,o),!0;case 5:return h.fn.call(h.context,t,n,o,i),!0;case 6:return h.fn.call(h.context,t,n,o,i,r),!0}for(a=1,s=new Array(p-1);a<p;a++)s[a-1]=arguments[a];h.fn.apply(h.context,s)}else for(a=0;a<d;a++)switch(u[a].once&&this.removeListener(e,u[a].fn,!0),p){case 1:u[a].fn.call(u[a].context);break;case 2:u[a].fn.call(u[a].context,t);break;case 3:u[a].fn.call(u[a].context,t,n);break;default:if(!s)for(c=1,s=new Array(p-1);c<p;c++)s[c-1]=arguments[c];u[a].fn.apply(u[a].context,s)}return!0},i.prototype.on=function(e,t,n){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),this._events[e].push(new o(t,n||this)),this},i.prototype.once=function(e,t,n){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),this._events[e].push(new o(t,n||this,!0)),this},i.prototype.removeListener=function(e,t,n){if(!this._events||!this._events[e])return this;var o=this._events[e],i=[];if(t)for(var r=0,s=o.length;r<s;r++)o[r].fn!==t&&o[r].once!==n&&i.push(o[r]);return i.length?this._events[e]=i:this._events[e]=null,this},i.prototype.removeAllListeners=function(e){return this._events?(e?this._events[e]=null:this._events={},this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.EventEmitter=i,i.EventEmitter2=i,i.EventEmitter3=i,"object"===(void 0===t?"undefined":r()(t))&&t.exports&&(t.exports=i)},{}],10:[function(e,t,n){var o=e("./bufferbuilder").BufferBuilder,i=e("./bufferbuilder").binaryFeatures,s={unpack:function(e){return new a(e).unpack()},pack:function(e){var t=new c;return t.pack(e),t.getBuffer()}};function a(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function c(){this.bufferBuilder=new o}function d(e){var t=e.charCodeAt(0);return t<=2047?"00":t<=65535?"000":t<=2097151?"0000":t<=67108863?"00000":"000000"}t.exports=s,a.prototype.unpack=function(){var e,t=this.unpack_uint8();if(t<128)return t;if((224^t)<32)return(224^t)-32;if((e=160^t)<=15)return this.unpack_raw(e);if((e=176^t)<=15)return this.unpack_string(e);if((e=144^t)<=15)return this.unpack_array(e);if((e=128^t)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:case 213:case 214:case 215:return;case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}},a.prototype.unpack_uint8=function(){var e=255&this.dataView[this.index];return this.index++,e},a.prototype.unpack_uint16=function(){var e=this.read(2),t=256*(255&e[0])+(255&e[1]);return this.index+=2,t},a.prototype.unpack_uint32=function(){var e=this.read(4),t=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,t},a.prototype.unpack_uint64=function(){var e=this.read(8),t=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,t},a.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-256},a.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-65536},a.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)},a.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)},a.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t},a.prototype.unpack_string=function(e){for(var t,n,o=this.read(e),i=0,r="";i<e;)(t=o[i])<128?(r+=String.fromCharCode(t),i++):(192^t)<32?(n=(192^t)<<6|63&o[i+1],r+=String.fromCharCode(n),i+=2):(n=(15&t)<<12|(63&o[i+1])<<6|63&o[i+2],r+=String.fromCharCode(n),i+=3);return this.index+=e,r},a.prototype.unpack_array=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=this.unpack();return t},a.prototype.unpack_map=function(e){for(var t={},n=0;n<e;n++){var o=this.unpack(),i=this.unpack();t[o]=i}return t},a.prototype.unpack_float=function(){var e=this.unpack_uint32(),t=(e>>23&255)-127;return(0==e>>31?1:-1)*(8388607&e|8388608)*Math.pow(2,t-23)},a.prototype.unpack_double=function(){var e=this.unpack_uint32(),t=this.unpack_uint32(),n=e>>31,o=(e>>20&2047)-1023,i=(1048575&e|1048576)*Math.pow(2,o-20)+t*Math.pow(2,o-52);return(0==n?1:-1)*i},a.prototype.read=function(e){var t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")},c.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},c.prototype.pack=function(e){var t=void 0===e?"undefined":r()(e);if("string"==t)this.pack_string(e);else if("number"==t)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"==t)!0===e?this.bufferBuilder.append(195):!1===e&&this.bufferBuilder.append(194);else if("undefined"==t)this.bufferBuilder.append(192);else{if("object"!=t)throw new Error('Type "'+t+'" not yet supported');if(null===e)this.bufferBuilder.append(192);else{var n=e.constructor;if(n==Array)this.pack_array(e);else if(n==Blob||n==File)this.pack_bin(e);else if(n==ArrayBuffer)i.useArrayBufferView?this.pack_bin(new Uint8Array(e)):this.pack_bin(e);else if("BYTES_PER_ELEMENT"in e)i.useArrayBufferView?this.pack_bin(new Uint8Array(e.buffer)):this.pack_bin(e.buffer);else if(n==Object)this.pack_object(e);else if(n==Date)this.pack_string(e.toString());else{if("function"!=typeof e.toBinaryPack)throw new Error('Type "'+n.toString()+'" not yet supported');this.bufferBuilder.append(e.toBinaryPack())}}}this.bufferBuilder.flush()},c.prototype.pack_bin=function(e){var t=e.length||e.byteLength||e.size;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this.bufferBuilder.append(218),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(t)}this.bufferBuilder.append(e)},c.prototype.pack_string=function(e){var t=function(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,d).length}(e);if(t<=15)this.pack_uint8(176+t);else if(t<=65535)this.bufferBuilder.append(216),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(t)}this.bufferBuilder.append(e)},c.prototype.pack_array=function(e){var t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this.bufferBuilder.append(220),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(t)}for(var n=0;n<t;n++)this.pack(e[n])},c.prototype.pack_integer=function(e){if(-32<=e&&e<=127)this.bufferBuilder.append(255&e);else if(0<=e&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(-128<=e&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(0<=e&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(-32768<=e&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(0<=e&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(-2147483648<=e&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(-0x8000000000000000<=e&&e<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(e);else{if(!(0<=e&&e<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(e)}},c.prototype.pack_double=function(e){var t=0;e<0&&(t=1,e=-e);var n=Math.floor(Math.log(e)/Math.LN2),o=e/Math.pow(2,n)-1,i=Math.floor(o*Math.pow(2,52)),r=Math.pow(2,32),s=t<<31|n+1023<<20|i/r&1048575,a=i%r;this.bufferBuilder.append(203),this.pack_int32(s),this.pack_int32(a)},c.prototype.pack_object=function(e){var t=u()(e).length;if(t<=15)this.pack_uint8(128+t);else if(t<=65535)this.bufferBuilder.append(222),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(t)}for(var n in e)e.hasOwnProperty(n)&&(this.pack(n),this.pack(e[n]))},c.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)},c.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(255&e)},c.prototype.pack_uint32=function(e){var t=4294967295&e;this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},c.prototype.pack_uint64=function(e){var t=e/Math.pow(2,32),n=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n)},c.prototype.pack_int8=function(e){this.bufferBuilder.append(255&e)},c.prototype.pack_int16=function(e){this.bufferBuilder.append((65280&e)>>8),this.bufferBuilder.append(255&e)},c.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},c.prototype.pack_int64=function(e){var t=Math.floor(e/Math.pow(2,32)),n=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n)}},{"./bufferbuilder":11}],11:[function(e,t,n){var o={};o.useBlobBuilder=function(){try{return new Blob([]),!1}catch(e){return!0}}(),o.useArrayBufferView=!o.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(e){return!0}}(),t.exports.binaryFeatures=o;var i=t.exports.BlobBuilder;function r(){this._pieces=[],this._parts=[]}"undefined"!=typeof window&&(i=t.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),r.prototype.append=function(e){"number"==typeof e?this._pieces.push(e):(this.flush(),this._parts.push(e))},r.prototype.flush=function(){if(this._pieces.length>0){var e=new Uint8Array(this._pieces);o.useArrayBufferView||(e=e.buffer),this._parts.push(e),this._pieces=[]}},r.prototype.getBuffer=function(){if(this.flush(),o.useBlobBuilder){for(var e=new i,t=0,n=this._parts.length;t<n;t++)e.append(this._parts[t]);return e.getBlob()}return new Blob(this._parts)},t.exports.BufferBuilder=r},{}],12:[function(e,t,n){var o=e("./util");function i(e,t){if(!(this instanceof i))return new i(e);this._dc=e,o.debug=t,this._outgoing={},this._incoming={},this._received={},this._window=1e3,this._mtu=500,this._interval=0,this._count=0,this._queue=[],this._setupDC()}i.prototype.send=function(e){var t=o.pack(e);t.size<this._mtu?this._handleSend(["no",t]):(this._outgoing[this._count]={ack:0,chunks:this._chunk(t)},o.debug&&(this._outgoing[this._count].timer=new Date),this._sendWindowedChunks(this._count),this._count+=1)},i.prototype._setupInterval=function(){var e=this;this._timeout=setInterval(function(){var t=e._queue.shift();if(t._multiple)for(var n=0,o=t.length;n<o;n+=1)e._intervalSend(t[n]);else e._intervalSend(t)},this._interval)},i.prototype._intervalSend=function(e){var t=this;e=o.pack(e),o.blobToBinaryString(e,function(e){t._dc.send(e)}),0===t._queue.length&&(clearTimeout(t._timeout),t._timeout=null)},i.prototype._processAcks=function(){for(var e in this._outgoing)this._outgoing.hasOwnProperty(e)&&this._sendWindowedChunks(e)},i.prototype._handleSend=function(e){for(var t=!0,n=0,o=this._queue.length;n<o;n+=1){var i=this._queue[n];i===e?t=!1:i._multiple&&-1!==i.indexOf(e)&&(t=!1)}t&&(this._queue.push(e),this._timeout||this._setupInterval())},i.prototype._setupDC=function(){var e=this;this._dc.onmessage=function(t){var n=t.data;if(n.constructor===String){var i=o.binaryStringToArrayBuffer(n);n=o.unpack(i),e._handleMessage(n)}}},i.prototype._handleMessage=function(e){var t,n=e[1],i=this._incoming[n],r=this._outgoing[n];switch(e[0]){case"no":var s=n;s&&this.onmessage(o.unpack(s));break;case"end":if(t=i,this._received[n]=e[2],!t)break;this._ack(n);break;case"ack":if(t=r){var a=e[2];t.ack=Math.max(a,t.ack),t.ack>=t.chunks.length?(o.log("Time: ",new Date-t.timer),delete this._outgoing[n]):this._processAcks()}break;case"chunk":if(!(t=i)){if(!0===this._received[n])break;t={ack:["ack",n,0],chunks:[]},this._incoming[n]=t}var c=e[2],u=e[3];t.chunks[c]=new Uint8Array(u),c===t.ack[2]&&this._calculateNextAck(n),this._ack(n);break;default:this._handleSend(e)}},i.prototype._chunk=function(e){for(var t=[],n=e.size,i=0;i<n;){var r=Math.min(n,i+this._mtu),s={payload:e.slice(i,r)};t.push(s),i=r}return o.log("Created",t.length,"chunks."),t},i.prototype._ack=function(e){var t=this._incoming[e].ack;this._received[e]===t[2]&&(this._complete(e),this._received[e]=!0),this._handleSend(t)},i.prototype._calculateNextAck=function(e){for(var t=this._incoming[e],n=t.chunks,o=0,i=n.length;o<i;o+=1)if(void 0===n[o])return void(t.ack[2]=o);t.ack[2]=n.length},i.prototype._sendWindowedChunks=function(e){o.log("sendWindowedChunks for: ",e);for(var t=this._outgoing[e],n=t.chunks,i=[],r=Math.min(t.ack+this._window,n.length),s=t.ack;s<r;s+=1)n[s].sent&&s!==t.ack||(n[s].sent=!0,i.push(["chunk",e,s,n[s].payload]));t.ack+this._window>=n.length&&i.push(["end",e,n.length]),i._multiple=!0,this._handleSend(i)},i.prototype._complete=function(e){o.log("Completed called for",e);var t=this,n=this._incoming[e].chunks,i=new Blob(n);o.blobToArrayBuffer(i,function(e){t.onmessage(o.unpack(e))}),delete this._incoming[e]},i.higherBandwidthSDP=function(e){var t=navigator.appVersion.match(/Chrome\/(.*?) /);if(t&&(t=parseInt(t[1].split(".").shift()))<31){var n=e.split("b=AS:30");if(n.length>1)return n[0]+"b=AS:102400"+n[1]}return e},i.prototype.onmessage=function(e){},t.exports.Reliable=i},{"./util":13}],13:[function(e,t,n){var o=e("js-binarypack"),i={debug:!1,inherits:function(e,t){e.super_=t,e.prototype=a()(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},pack:o.pack,unpack:o.unpack,log:function(){if(i.debug){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.unshift("Reliable: "),console.log.apply(console,e)}},setZeroTimeout:function(e){var t=[],n="zero-timeout-message";function o(o){o.source==e&&o.data==n&&(o.stopPropagation&&o.stopPropagation(),t.length&&t.shift()())}return e.addEventListener?e.addEventListener("message",o,!0):e.attachEvent&&e.attachEvent("onmessage",o),function(o){t.push(o),e.postMessage(n,"*")}}(this),blobToArrayBuffer:function(e,t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsArrayBuffer(e)},blobToBinaryString:function(e,t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsBinaryString(e)},binaryStringToArrayBuffer:function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer},randomToken:function(){return Math.random().toString(36).substr(2)}};t.exports=i},{"js-binarypack":10}]},{},[3])},mFyu:function(e,t){e.exports="data:image/png;base64,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"},pGc2:function(e,t){e.exports="data:image/png;base64,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"},wBho:function(e,t,n){var o={"./background.png":"Efnd","./black.png":"iZrf","./blue.png":"M2yu","./color-swatch-brown.png":"ZFrl","./color-swatch-erase.png":"6Is8","./color-swatch-green.png":"N8v+","./color-swatch-yellow.png":"9rie","./eraser.png":"JtUg","./frame.png":"3q37","./green.png":"pGc2","./logo.png":"WyGl","./marker-outline.png":"mFyu","./red.png":"aOdu","./yellow.png":"bKhN"};function i(e){return n(r(e))}function r(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}i.keys=function(){return Object.keys(o)},i.resolve=r,e.exports=i,i.id="wBho"}},["NHnr"]);
//# sourceMappingURL=app.50991ed840af6a98f707.js.map